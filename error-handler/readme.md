# 错误处理

## 七种错误类型

- Error：错误的基类，其他错误都继承自该类型
- EvalError：Eval 函数执行异常
- RangeError：数组越界
- ReferenceError：尝试引用一个未被定义的变量时，将会抛出此异常
  引用不存在的变量
- SyntaxError：语法解析不合理
- TypeError：类型错误，用来表示值的类型非预期类型时发生的错误: 
  调用不存在的函数，解构不是迭代器的对象
  [在变量中保存着意外类型时，或者在访问不存在的方法时，都会导致这种错误。错误的原因虽然多种多样，但归根结底还是由于在执行特定类型的操作时，变量的类型并不符合要求所致]
- URIError：以一种错误的方式使用全局 URI 处理函数而产生的错误

## 错误处理

- 是否是致命的，会不会导致其他连带错误
- 后续的代码是否还可以执行，用户还能不能操作
- 是否需要将错误信息反馈给用户，提示用户如何处理该错误
- 是否需要进行数据上报
  
  [任何错误处理策略中最重要的一个部分，就是确定错误是否致命]

  1、服务器异常导致【p1】：阻塞用户操作，弹窗提示“服务器异常，请稍后重试”，并提供刷新按钮
  2、数据异常导致【p1】，阻塞用户操作，提示“服务器异常，请联系客服处理”，同时将错误上报，开发人员通过异常堆栈和埋点定位找到原因
  3、如果解析错误属于预料之中，也有替代的默认值，可以使用默认值代替【容错处理】
  

- try-catch 可以捕获同步错误，无法捕获一些语法错误 和 异步错误
- window.onerror 可以捕捉同步和异步 事件处理器，但无法捕捉 [promise 错误]()，资源错误
- addEventListener('error') 可以捕捉同步和异步 事件处理器，资源错误, 但[无法捕捉 promise 错误]()
- vue 的 errorhanlder 和 react 的 componentDidCatch 只能捕捉到 框架的错误，提供组件信息，无法捕获异步和事件处理器的错误

  Vue.config.errorHandler = (err, vm, info) => {}
  // err: 错误信息 和堆栈
  // vm: 发生错误的组件
  // info: mounted hook ..

